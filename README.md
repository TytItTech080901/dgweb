# ğŸ® æ›ˆçµæ™ºèƒ½å°ç¯å®¶é•¿ç«¯ç³»ç»Ÿ

ä¸€ä¸ªé›†æˆäº†å§¿åŠ¿æ£€æµ‹ã€æƒ…ç»ªåˆ†æã€è¯­éŸ³åŠ©æ‰‹å’Œè®¾å¤‡æ§åˆ¶çš„æ™ºèƒ½å®¶åº­æ•™è‚²è¾…åŠ©ç³»ç»Ÿã€‚åŸºäºFlaskæ¶æ„ï¼Œæä¾›å®æ—¶è§†é¢‘åˆ†æã€æœºæ¢°è‡‚æ§åˆ¶ã€æ•°æ®å¯è§†åŒ–å’Œå®¶é•¿ç›‘æ§ç­‰åŠŸèƒ½ã€‚

An integrated smart home education assistance system with posture detection, emotion analysis, voice assistant, and device control. Built on Flask architecture, providing real-time video analysis, robotic arm control, data visualization, and parental monitoring.

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹ | Features

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- ğŸ¤– **AIå§¿åŠ¿æ£€æµ‹** | Real-time posture analysis with MediaPipe
- ğŸ˜Š **æƒ…ç»ªè¯†åˆ«åˆ†æ** | Emotion detection and analysis
- ğŸ¤ **æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹** | Voice assistant with Snowboy wake word detection
- ğŸ“¹ **å®æ—¶è§†é¢‘æµ** | Live video streaming and processing
- ğŸ¦¾ **æœºæ¢°è‡‚æ§åˆ¶** | Robotic arm control via serial communication
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** | Interactive charts and analytics dashboard

### ğŸ  å®¶é•¿ç›‘æ§åŠŸèƒ½
- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **å®¶é•¿ç«¯é¢æ¿** | Comprehensive parental monitoring dashboard
- ğŸ“ˆ **å­¦ä¹ çŠ¶æ€åˆ†æ** | Learning behavior analysis and reports
- â° **ä¸“æ³¨åº¦ç›‘æµ‹** | Focus time tracking and statistics
- ğŸ“‹ **æ—¥æŠ¥/å‘¨æŠ¥ç”Ÿæˆ** | Automated daily and weekly reports
- ğŸš¨ **ä¸è‰¯å§¿åŠ¿æé†’** | Bad posture alerts and notifications
- ğŸ’¡ **æ™ºèƒ½ç¯å…‰æ§åˆ¶** | Adaptive lighting control

### ğŸ”§ æŠ€æœ¯åŠŸèƒ½
- ğŸŒ **Webç•Œé¢æ§åˆ¶** | Modern web-based control interface
- ğŸ’¾ **MySQLæ•°æ®å­˜å‚¨** | Persistent data storage with MySQL
- ğŸ”„ **å®æ—¶æ•°æ®æ¨é€** | Real-time data updates via Server-Sent Events
- ğŸ“± **å“åº”å¼è®¾è®¡** | Mobile-friendly responsive design
- ğŸ›ï¸ **å‚æ•°åŠ¨æ€è°ƒèŠ‚** | Real-time parameter adjustment
- ğŸ”§ **è°ƒè¯•æ¨¡å¼æ”¯æŒ** | Comprehensive debugging capabilities

## ğŸŒŸ é¡¹ç›®äº®ç‚¹ | Project Highlights

### ğŸ”¥ æŠ€æœ¯äº®ç‚¹
- ğŸš€ **å¤šAIæ¨¡å‹èåˆ**: MediaPipe + YOLO + æƒ…ç»ªè¯†åˆ«å¤šæ¨¡å‹ååŒå·¥ä½œ
- âš¡ **å®æ—¶æ€§èƒ½ä¼˜åŒ–**: æ”¯æŒå¤šåˆ†è¾¨ç‡è‡ªé€‚åº”ï¼Œä¿è¯æµç•…ä½“éªŒ
- ğŸ”„ **æ¨¡å—åŒ–æ¶æ„**: æ¾è€¦åˆè®¾è®¡ï¼Œæ”¯æŒåŠŸèƒ½ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
- ğŸŒ **å…¨æ ˆWebåº”ç”¨**: å‰åç«¯åˆ†ç¦»ï¼Œæ”¯æŒç§»åŠ¨ç«¯è®¿é—®
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: å®Œæ•´çš„æ•°æ®é‡‡é›†ã€å­˜å‚¨å’Œåˆ†æé“¾è·¯

### ğŸ¯ åˆ›æ–°åŠŸèƒ½  
- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **æ™ºèƒ½å®¶åº­æ•™è‚²**: ä¸“ä¸ºå®¶åº­æ•™è‚²åœºæ™¯è®¾è®¡çš„ç›‘æ§ç³»ç»Ÿ
- ğŸ­ **å¤šç»´åº¦åˆ†æ**: å§¿åŠ¿ + æƒ…ç»ª + ä¸“æ³¨åº¦çš„ç»¼åˆè¯„ä¼°
- ğŸ¦¾ **ç¡¬ä»¶è”åŠ¨**: è½¯ç¡¬ä»¶ä¸€ä½“åŒ–çš„æ™ºèƒ½å°ç¯æ§åˆ¶
- ğŸ“Š **å¯è§†åŒ–æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šçš„å­¦ä¹ åˆ†ææŠ¥å‘Š
- ğŸ¤ **è¯­éŸ³äº¤äº’**: è‡ªç„¶è¯­è¨€äº¤äº’çš„æ™ºèƒ½åŠ©æ‰‹

### ğŸ’¡ åº”ç”¨ä»·å€¼
- ğŸ‘¶ **å„¿ç«¥å¥åº·**: é¢„é˜²å„¿ç«¥è¿‘è§†å’Œè„ŠæŸ±é—®é¢˜  
- ğŸ“š **å­¦ä¹ æ•ˆç‡**: é€šè¿‡æ•°æ®åˆ†æä¼˜åŒ–å­¦ä¹ ç¯å¢ƒ
- ğŸ‘ª **å®¶åº­å’Œè°**: å¸®åŠ©å®¶é•¿ç§‘å­¦ç›‘ç£å­©å­å­¦ä¹ 
- ğŸ¥ **é¢„é˜²åŒ»å­¦**: æ—©æœŸå‘ç°å’Œé¢„é˜²å¥åº·é—®é¢˜
- ğŸ¤– **AIæ™®åŠ**: å°†AIæŠ€æœ¯å¸¦å…¥æ™®é€šå®¶åº­

## ğŸ› ï¸ ç³»ç»Ÿè¦æ±‚ | Requirements

### ğŸ’» ç¡¬ä»¶è¦æ±‚ | Hardware Requirements
- ï¿½ï¸ **CPU**: Intel i5 / AMD Ryzen 5 æˆ–æ›´é«˜ | or higher
- ğŸ§  **å†…å­˜**: 4GB RAM æœ€å°ï¼Œ8GB æ¨è | minimum, 8GB recommended  
- ï¿½ **å­˜å‚¨**: 5GB å¯ç”¨ç©ºé—´ | available storage
- ğŸ“· **æ‘„åƒå¤´**: USBæ‘„åƒå¤´æˆ–å†…ç½®æ‘„åƒå¤´ | USB or built-in camera
- ğŸ¤ **éº¦å…‹é£**: ç”¨äºè¯­éŸ³åŠ©æ‰‹åŠŸèƒ½ | For voice assistant
- ğŸ”Œ **ä¸²å£**: USBè½¬ä¸²å£è®¾å¤‡ (å¯é€‰) | USB-to-Serial (Optional)

### ğŸ è½¯ä»¶è¦æ±‚ | Software Requirements  
- ğŸ **Python**: 3.9+ (æ¨è 3.9-3.11) | recommended 3.9-3.11
- ï¿½ï¸ **MySQL**: 5.7+ æˆ– 8.0+ | or 8.0+
- ğŸŒ **æµè§ˆå™¨**: Chrome 90+, Firefox 88+, Safari 14+ | Modern browsers
- ğŸ–¥ï¸ **æ“ä½œç³»ç»Ÿ**: Windows 10+, Ubuntu 18.04+, macOS 10.15+ | OS Support

### âš¡ æ€§èƒ½å‚æ•° | Performance Metrics
- ğŸ“¹ **è§†é¢‘å¤„ç†**: 15-30 FPS (å–å†³äºç¡¬ä»¶) | depending on hardware
- ğŸ¤– **AIæ£€æµ‹å»¶è¿Ÿ**: < 100ms (å•å¸§å¤„ç†) | single frame processing  
- ğŸŒ **Webå“åº”**: < 50ms (APIè°ƒç”¨) | API calls
- ğŸ’¾ **æ•°æ®å­˜å‚¨**: æ”¯æŒ10ä¸‡+è®°å½• | 100k+ records supported
- ğŸ”„ **å¹¶å‘ç”¨æˆ·**: æ”¯æŒ10+åŒæ—¶è®¿é—® | concurrent users

## âš¡ å¿«é€Ÿå¼€å§‹ | Quick Start

### ğŸš€ ä¸€é”®å¯åŠ¨ | One-Click Start
```bash
# å…‹éš†é¡¹ç›® | Clone project
git clone <repository-url>
cd Py-server

# å®‰è£…ä¾èµ– | Install dependencies  
pip install -r requirements.txt

# é…ç½®æ•°æ®åº“ | Setup database
mysql -u root -p < setup.sql

# å¯åŠ¨åº”ç”¨ | Start application
python app.py
```

### ğŸ¯ å¿«é€Ÿä½“éªŒ | Quick Experience
1. ğŸŒ æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5000
2. ğŸ“¹ ç¡®ä¿æ‘„åƒå¤´æ­£å¸¸å·¥ä½œ
3. ğŸš€ ç‚¹å‡»"å¯åŠ¨åˆ†æç³»ç»Ÿ"å¼€å§‹ä½“éªŒ
4. ğŸ‘€ è§‚å¯Ÿå®æ—¶å§¿åŠ¿å’Œæƒ…ç»ªæ£€æµ‹ç»“æœ
5. ğŸ“Š æŸ¥çœ‹æ•°æ®å¯è§†åŒ–å›¾è¡¨

### ğŸ”§ æœ€å°é…ç½® | Minimal Configuration
å¦‚æœåªæƒ³ä½“éªŒæ ¸å¿ƒåŠŸèƒ½ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š
For core functionality only:
```python
# config.py æœ€å°é…ç½®
DEBUG = True
DEBUG_BUTTON_VISIBLE = True  
ENABLE_CHATBOT = False  # è·³è¿‡è¯­éŸ³åŠŸèƒ½
# ä½¿ç”¨é»˜è®¤æ•°æ®åº“é…ç½®
```

## ğŸš€ å®‰è£…æ­¥éª¤ | Installation

### 1. ğŸ“¥ å…‹éš†é¡¹ç›® | Clone the project
```bash
git clone <repository-url>
cd Py-server
```

### 2. ğŸ åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ | Create and activate virtual environment
```bash
conda env create -f environment.yml
conda activate pyserver
```

æˆ–ä½¿ç”¨ pip | Or using pip:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
pip install -r requirements.txt
```

### 3. ğŸ—„ï¸ é…ç½®æ•°æ®åº“ | Configure Database

ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
Edit `config.py` file to set database connection information:

```python
DB_CONFIG = {
    'host': 'localhost',
    'user': 'your_username',
    'password': 'your_password',
    'database': 'serial_data'
}

# è°ƒè¯•é…ç½® | Debug Configuration
DEBUG = True  # å¼€å¯è°ƒè¯•æ¨¡å¼ | Enable debug mode
DEBUG_BUTTON_VISIBLE = True  # æ˜¾ç¤ºè°ƒè¯•æŒ‰é’® | Show debug button

# è¯­éŸ³åŠ©æ‰‹é…ç½® | Voice Assistant Configuration
ENABLE_CHATBOT = True  # å¯ç”¨è¯­éŸ³åŠ©æ‰‹ | Enable voice assistant
ENABLE_WELCOME_MESSAGE = False  # å¯ç”¨æ¬¢è¿æ¶ˆæ¯ | Enable welcome message
AUTO_START_CHATBOT_LOOP = False  # è‡ªåŠ¨å¯åŠ¨å¯¹è¯å¾ªç¯ | Auto start chat loop
```

### 4. ğŸ’¾ åˆ›å»ºæ•°æ®åº“ | Create Database
```sql
CREATE DATABASE serial_data;
CREATE USER 'serial_user'@'localhost' IDENTIFIED BY 'Serial123!';
GRANT ALL PRIVILEGES ON serial_data.* TO 'serial_user'@'localhost';
FLUSH PRIVILEGES;
```

## ğŸƒâ€â™‚ï¸ è¿è¡Œåº”ç”¨ | Running the Application

```bash
python app.py
```

ğŸŒ æœåŠ¡å™¨å°†åœ¨ http://0.0.0.0:5000 å¯åŠ¨ï¼Œæ”¯æŒæ‰€æœ‰ç½‘ç»œæ¥å£è®¿é—®

The server will start at http://0.0.0.0:5000 and accept connections from all network interfaces

### ğŸ® è®¿é—®ç•Œé¢ | Access Interfaces

- ğŸ  **ä¸»é¡µé¢**: http://localhost:5000 - æ™ºèƒ½å°ç¯å®¶é•¿ç«¯æ§åˆ¶é¢æ¿
- ğŸ”§ **è°ƒè¯•é¡µé¢**: http://localhost:5000/debug - ç³»ç»Ÿè°ƒè¯•å’Œå‚æ•°è°ƒæ•´  
- ğŸ¯ **æ£€æµ‹é¡µé¢**: http://localhost:5000/detection - ç›®æ ‡æ£€æµ‹æ§åˆ¶
- ğŸ“Š **åå§¿è®°å½•**: http://localhost:5000/posture-records - åå§¿å†å²è®°å½•è¯¦æƒ…

## ğŸ“– ä½¿ç”¨è¯´æ˜ | Usage

### ğŸ  å®¶é•¿ç›‘æ§é¢æ¿
1. ğŸ–¥ï¸ æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5000
2. ğŸ“Š æŸ¥çœ‹å®æ—¶ç›‘æ§æ•°æ®ï¼š
   - **åå§¿æ£€æµ‹**: å®æ—¶å§¿åŠ¿åˆ†æå’Œä¸è‰¯åå§¿ç»Ÿè®¡
   - **ç”¨çœ¼æƒ…å†µ**: ç”¨çœ¼è·ç¦»å’Œæ—¶é•¿ç›‘æµ‹
   - **æƒ…ç»ªåé¦ˆ**: å­¦ä¹ æƒ…ç»ªçŠ¶æ€åˆ†æ
3. ğŸ“ˆ æ•°æ®å¯è§†åŒ–ï¼š
   - åå§¿è´¨é‡è¶‹åŠ¿å›¾
   - ç”¨çœ¼å¥åº·å›¾è¡¨  
   - æƒ…ç»ªæ³¢åŠ¨åˆ†æ
4. ğŸ“‹ æŠ¥å‘Šç”Ÿæˆï¼š
   - ä¸€é”®ç”Ÿæˆæ—¥æŠ¥/å‘¨æŠ¥
   - PDFæ ¼å¼å¯¼å‡º
   - æ•°æ®ç»Ÿè®¡åˆ†æ

### ğŸ¯ å§¿åŠ¿ä¸æƒ…ç»ªåˆ†æ
1. ğŸš€ å¯åŠ¨åˆ†æç³»ç»Ÿï¼šç‚¹å‡»"å¯åŠ¨åˆ†æç³»ç»Ÿ"æŒ‰é’®
2. ğŸ“¹ å®æ—¶è§†é¢‘ç›‘æ§ï¼šæŸ¥çœ‹å§¿åŠ¿æ£€æµ‹å’Œæƒ…ç»ªåˆ†æç»“æœ
3. ğŸ”§ å‚æ•°è°ƒæ•´ï¼š
   - æƒ…ç»ªæ£€æµ‹æ•æ„Ÿåº¦è°ƒèŠ‚
   - å§¿åŠ¿åˆ¤æ–­é˜ˆå€¼è®¾ç½®
   - æ£€æµ‹é¢‘ç‡æ§åˆ¶
4. ğŸ“Š æ•°æ®æŸ¥çœ‹ï¼šå®æ—¶FPSã€æ£€æµ‹çŠ¶æ€ã€åˆ†æç»“æœ

### ğŸ¦¾ æœºæ¢°è‡‚æ§åˆ¶ (ä¸²å£é€šä¿¡)
1. ğŸ”Œ è¿æ¥è®¾å¤‡ï¼šé€‰æ‹©ä¸²å£è®¾å¤‡å’Œæ³¢ç‰¹ç‡
2. ğŸ“¡ æ•°æ®é€šä¿¡ï¼š
   - **æ–‡æœ¬æ¨¡å¼**: å‘é€è‡ªå®šä¹‰æ–‡æœ¬å‘½ä»¤
   - **å¸§æ¨¡å¼**: å‘é€ç»“æ„åŒ–Yaw/Pitchæ•°æ®
3. ğŸ“ å†å²è®°å½•ï¼šæŸ¥çœ‹é€šä¿¡å†å²å’Œå“åº”æ•°æ®
4. ğŸ”„ å®æ—¶æ›´æ–°ï¼šè‡ªåŠ¨æ¥æ”¶è®¾å¤‡åé¦ˆæ•°æ®

### ğŸ¤ è¯­éŸ³åŠ©æ‰‹
1. âš™ï¸ åœ¨ `config.py` ä¸­å¯ç”¨è¯­éŸ³åŠ©æ‰‹: `ENABLE_CHATBOT = True`
2. ğŸ™ï¸ è¯­éŸ³å”¤é†’ï¼šä½¿ç”¨è®¾å®šçš„å”¤é†’è¯æ¿€æ´»åŠ©æ‰‹
3. ğŸ’¬ è¯­éŸ³äº¤äº’ï¼šè¿›è¡Œè‡ªç„¶è¯­è¨€å¯¹è¯
4. ğŸ”§ åŠŸèƒ½é…ç½®ï¼š
   - æ¬¢è¿æ¶ˆæ¯å¼€å…³
   - è‡ªåŠ¨å¯¹è¯å¾ªç¯
   - è¯­éŸ³è¯†åˆ«å‚æ•°

## ğŸ”— APIæ¥å£æ–‡æ¡£ | API Documentation

### ğŸ  é¡µé¢è·¯ç”± | Page Routes
- `GET /` - å®¶é•¿ç›‘æ§ä¸»é¡µé¢ | Main parental monitoring page
- `GET /debug` - ç³»ç»Ÿè°ƒè¯•é¡µé¢ | System debug page  
- `GET /detection` - ç›®æ ‡æ£€æµ‹é¡µé¢ | Object detection page
- `GET /posture-records` - åå§¿å†å²è®°å½• | Posture history records

### ğŸ“Š æ•°æ®API | Data APIs
- `GET /api/status` - è·å–ç³»ç»ŸçŠ¶æ€ | Get system status
- `POST /api/start_analysis` - å¯åŠ¨åˆ†æç³»ç»Ÿ | Start analysis system
- `POST /api/stop_analysis` - åœæ­¢åˆ†æç³»ç»Ÿ | Stop analysis system
- `GET /api/posture_data` - è·å–åå§¿æ•°æ® | Get posture data
- `GET /api/emotion_data` - è·å–æƒ…ç»ªæ•°æ® | Get emotion data
- `GET /api/fps_info` - è·å–å¸§ç‡ä¿¡æ¯ | Get FPS information

### ğŸ”Œ ä¸²å£API | Serial APIs  
- `POST /api/connect_serial` - è¿æ¥ä¸²å£è®¾å¤‡ | Connect serial device
- `POST /api/disconnect_serial` - æ–­å¼€ä¸²å£è¿æ¥ | Disconnect serial
- `POST /api/send_command` - å‘é€ä¸²å£å‘½ä»¤ | Send serial command
- `POST /api/send_frame` - å‘é€å¸§æ•°æ® | Send frame data
- `GET /api/serial_status` - è·å–ä¸²å£çŠ¶æ€ | Get serial status

### ğŸ“¹ è§†é¢‘æµAPI | Video Stream APIs
- `GET /pose_video_feed` - å§¿åŠ¿åˆ†æè§†é¢‘æµ | Posture analysis video stream
- `GET /emotion_video_feed` - æƒ…ç»ªåˆ†æè§†é¢‘æµ | Emotion analysis video stream  
- `POST /api/set_resolution` - è®¾ç½®è§†é¢‘åˆ†è¾¨ç‡ | Set video resolution
- `POST /api/toggle_video_stream` - åˆ‡æ¢è§†é¢‘æµçŠ¶æ€ | Toggle video stream

### ğŸ—„ï¸ æ•°æ®åº“API | Database APIs
- `GET /api/history` - è·å–å†å²è®°å½• | Get history records
- `POST /api/clear_history` - æ¸…ç©ºå†å²è®°å½• | Clear history records
- `GET /api/posture_records` - è·å–åå§¿è®°å½• | Get posture records
- `POST /api/export_data` - å¯¼å‡ºæ•°æ® | Export data

### ğŸ¤ è¯­éŸ³åŠ©æ‰‹API | Voice Assistant APIs
- `POST /api/start_chatbot` - å¯åŠ¨è¯­éŸ³åŠ©æ‰‹ | Start voice assistant
- `POST /api/stop_chatbot` - åœæ­¢è¯­éŸ³åŠ©æ‰‹ | Stop voice assistant  
- `GET /api/chatbot_status` - è·å–åŠ©æ‰‹çŠ¶æ€ | Get assistant status

## ğŸ—ï¸ é¡¹ç›®æ¶æ„ | Project Architecture

### ğŸ“ æ ¸å¿ƒæ¨¡å— | Core Modules
```
â”œâ”€â”€ ğŸ“± app.py                    # åº”ç”¨å…¥å£ä¸»ç¨‹åº | Main application entry
â”œâ”€â”€ âš™ï¸ config.py                 # ç³»ç»Ÿé…ç½®æ–‡ä»¶ | System configuration  
â”œâ”€â”€ ğŸ—„ï¸ db_handler.py             # æ•°æ®åº“æ“ä½œå¤„ç† | Database operations
â”œâ”€â”€ ğŸ”Œ serial_handler.py         # ä¸²å£é€šä¿¡å¤„ç† | Serial communication
â”œâ”€â”€ ğŸ“‚ modules/                  # åŠŸèƒ½æ¨¡å—ç›®å½• | Function modules
â”‚   â”œâ”€â”€ ğŸ¯ detection_module.py   # YOLOç›®æ ‡æ£€æµ‹ | YOLO object detection
â”‚   â”œâ”€â”€ ğŸ¤– posture_module.py     # MediaPipeå§¿åŠ¿åˆ†æ | MediaPipe posture analysis  
â”‚   â”œâ”€â”€ ğŸ˜Š emotion_analyzer.py   # æƒ…ç»ªè¯†åˆ«åˆ†æ | Emotion recognition
â”‚   â”œâ”€â”€ ğŸ¤ chatbot_module.py     # è¯­éŸ³åŠ©æ‰‹æ¨¡å— | Voice assistant module
â”‚   â”œâ”€â”€ ğŸ“¹ video_stream_module.py # è§†é¢‘æµå¤„ç† | Video stream processing
â”‚   â”œâ”€â”€ ğŸ”Œ serial_module.py      # ä¸²å£é€šä¿¡æ¨¡å— | Serial communication module
â”‚   â”œâ”€â”€ ğŸ—„ï¸ database_module.py    # æ•°æ®åº“ç®¡ç† | Database management
â”‚   â””â”€â”€ ğŸ›£ï¸ routes.py            # APIè·¯ç”±å®šä¹‰ | API route definitions
â”œâ”€â”€ ğŸ¨ templates/               # HTMLæ¨¡æ¿æ–‡ä»¶ | HTML templates
â”‚   â”œâ”€â”€ ğŸ  main.html            # ä¸»é¡µé¢æ¨¡æ¿ | Main page template
â”‚   â”œâ”€â”€ ğŸ”§ debug.html           # è°ƒè¯•é¡µé¢æ¨¡æ¿ | Debug page template  
â”‚   â”œâ”€â”€ ğŸ¯ detection.html       # æ£€æµ‹é¡µé¢æ¨¡æ¿ | Detection page template
â”‚   â””â”€â”€ ğŸ“Š posture_records.html # åå§¿è®°å½•æ¨¡æ¿ | Posture records template
â”œâ”€â”€ ğŸ¨ static/                  # é™æ€èµ„æºæ–‡ä»¶ | Static resources
â”‚   â”œâ”€â”€ ğŸ¨ css/                 # æ ·å¼è¡¨æ–‡ä»¶ | Stylesheets
â”‚   â”œâ”€â”€ ğŸ® js/                  # JavaScriptè„šæœ¬ | JavaScript files
â”‚   â””â”€â”€ ğŸ–¼ï¸ posture_images/      # åå§¿å›¾åƒå­˜å‚¨ | Posture images storage
â”œâ”€â”€ ğŸ¤ Audio/                   # è¯­éŸ³åŠ©æ‰‹æ¨¡å— | Voice assistant
â”‚   â”œâ”€â”€ â„ï¸ Snowboy/            # è¯­éŸ³å”¤é†’å¼•æ“ | Voice wake-up engine
â”‚   â”œâ”€â”€ ğŸ¤ voice_assistant.py   # è¯­éŸ³åŠ©æ‰‹æ ¸å¿ƒ | Voice assistant core
â”‚   â””â”€â”€ ğŸ› ï¸ tools.py            # è¯­éŸ³å·¥å…·å‡½æ•° | Voice utility functions
â”œâ”€â”€ ğŸ¤– Yolo/                    # YOLOæ£€æµ‹æ¨¡å‹ | YOLO detection models
â”‚   â”œâ”€â”€ ğŸ¯ detector.py          # æ£€æµ‹å™¨å®ç° | Detector implementation
â”‚   â”œâ”€â”€ ğŸ“· camera.py            # æ‘„åƒå¤´æ¥å£ | Camera interface
â”‚   â””â”€â”€ ğŸ§  best6_rknn_model/    # è®­ç»ƒå¥½çš„æ¨¡å‹ | Trained models
â””â”€â”€ ğŸ“š docs/                    # é¡¹ç›®æ–‡æ¡£ | Project documentation
    â””â”€â”€ ğŸ“‹ command_frame.md     # å‘½ä»¤å¸§æ ¼å¼è¯´æ˜ | Command frame format
```

### ğŸ”— ç³»ç»Ÿæµç¨‹ | System Workflow
1. ğŸ¬ **è§†é¢‘é‡‡é›†**: æ‘„åƒå¤´è·å–å®æ—¶è§†é¢‘æµ
2. ğŸ¤– **AIåˆ†æ**: MediaPipeå§¿åŠ¿æ£€æµ‹ + æƒ…ç»ªè¯†åˆ«
3. ğŸ“Š **æ•°æ®å¤„ç†**: å®æ—¶æ•°æ®åˆ†æå’ŒçŠ¶æ€åˆ¤æ–­  
4. ğŸ’¾ **æ•°æ®å­˜å‚¨**: MySQLæ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨
5. ğŸŒ **Webå±•ç¤º**: å®æ—¶æ¨é€åˆ°å‰ç«¯ç•Œé¢
6. ğŸ¦¾ **è®¾å¤‡æ§åˆ¶**: ä¸²å£é€šä¿¡æ§åˆ¶æœºæ¢°è‡‚è®¾å¤‡
7. ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **å®¶é•¿ç›‘æ§**: ç”ŸæˆæŠ¥å‘Šå’Œå¯è§†åŒ–å›¾è¡¨

## âš™ï¸ é…ç½®é€‰é¡¹ | Configuration Options

åœ¨ `config.py` ä¸­å¯ä»¥é…ç½®ä»¥ä¸‹é€‰é¡¹ï¼š
The following options can be configured in `config.py`:

### ğŸ”Œ ä¸²å£è®¾ç½® | Serial Port Settings
```python
SERIAL_PORTS = ['/dev/ttyUSB0', '/dev/ttyUSB1', '/dev/ttyACM0', '/dev/ttyACM1']
SERIAL_BAUDRATE = 115200
```

### ğŸ—„ï¸ æ•°æ®åº“è®¾ç½® | Database Settings  
```python
DB_CONFIG = {
    'host': 'localhost',
    'user': 'serial_user', 
    'password': 'Serial123!',
    'database': 'serial_data'
}
```

### ğŸŒ æœåŠ¡å™¨è®¾ç½® | Server Settings
```python
OPEN_HOST = '0.0.0.0'  # ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ | Listen on all interfaces
OPEN_PORT = 5000       # æœåŠ¡ç«¯å£ | Service port
```

### ğŸ”§ è°ƒè¯•è®¾ç½® | Debug Settings
```python
DEBUG = True                    # è°ƒè¯•æ¨¡å¼ | Debug mode
DEBUG_BUTTON_VISIBLE = True     # è°ƒè¯•æŒ‰é’®æ˜¾ç¤º | Debug button visibility
```

### ğŸ¤ è¯­éŸ³åŠ©æ‰‹è®¾ç½® | Voice Assistant Settings
```python
ENABLE_CHATBOT = True           # å¯ç”¨è¯­éŸ³åŠ©æ‰‹ | Enable voice assistant
ENABLE_WELCOME_MESSAGE = False  # æ¬¢è¿æ¶ˆæ¯ | Welcome message
AUTO_START_CHATBOT_LOOP = False # è‡ªåŠ¨å¯åŠ¨å¯¹è¯ | Auto start conversation
```

## ğŸ”„ æ•°æ®å¤„ç†æµç¨‹ | Data Processing Workflow

### ğŸ¯ å§¿åŠ¿æ£€æµ‹æµç¨‹ | Posture Detection Flow
1. ğŸ“¹ **è§†é¢‘é‡‡é›†**: æ‘„åƒå¤´å®æ—¶æ•è·è§†é¢‘å¸§
2. ğŸ¤– **MediaPipeå¤„ç†**: æå–äººä½“å…³é”®ç‚¹åæ ‡
3. ğŸ“ **è§’åº¦è®¡ç®—**: è®¡ç®—å¤´éƒ¨å€¾æ–œè§’åº¦å’Œåå§¿çŠ¶æ€
4. âš–ï¸ **çŠ¶æ€åˆ¤æ–­**: æ ¹æ®é˜ˆå€¼åˆ¤æ–­åå§¿æ˜¯å¦è‰¯å¥½
5. ğŸ’¾ **æ•°æ®å­˜å‚¨**: ä¿å­˜æ£€æµ‹ç»“æœåˆ°MySQLæ•°æ®åº“
6. ğŸ“Š **å®æ—¶å±•ç¤º**: é€šè¿‡SSEæ¨é€åˆ°å‰ç«¯ç•Œé¢

### ğŸ˜Š æƒ…ç»ªè¯†åˆ«æµç¨‹ | Emotion Recognition Flow  
1. ğŸ‘¤ **é¢éƒ¨æ£€æµ‹**: ä»è§†é¢‘å¸§ä¸­æ£€æµ‹é¢éƒ¨åŒºåŸŸ
2. ğŸ” **ç‰¹å¾æå–**: æå–é¢éƒ¨è¡¨æƒ…ç‰¹å¾ç‚¹
3. ğŸ§  **æƒ…ç»ªåˆ†æ**: AIæ¨¡å‹åˆ†æå½“å‰æƒ…ç»ªçŠ¶æ€
4. ğŸ“ˆ **å¹³æ»‘å¤„ç†**: å¤šå¸§å¹³æ»‘é¿å…æ£€æµ‹æŠ–åŠ¨
5. ğŸ“Š **çŠ¶æ€æ›´æ–°**: æ›´æ–°æƒ…ç»ªçŠ¶æ€åˆ°å‰ç«¯æ˜¾ç¤º

### ğŸ¦¾ æœºæ¢°è‡‚æ§åˆ¶æµç¨‹ | Robotic Arm Control Flow
1. ğŸ“¡ **æ•°æ®å‘é€**: 
   - é€šè¿‡Webç•Œé¢è¾“å…¥Yaw/Pitchæ§åˆ¶å‚æ•°
   - æŒ‰ç…§ç‰¹å®šå¸§æ ¼å¼æ‰“åŒ…æ•°æ®: `start + type + find_bool + yaw + pitch + end`
   - é€šè¿‡ä¸²å£å‘é€åˆ°ä¸‹ä½æœº

2. ğŸ“¡ **æ•°æ®æ¥æ”¶**:
   - è‡ªåŠ¨ç›‘å¬ä¸²å£æ•°æ®
   - è§£æä¸‹ä½æœºè¿”å›çš„å¸§æ ¼å¼: `start + type + yaw + pitch + end`  
   - å®æ—¶æ˜¾ç¤ºæ¥æ”¶åˆ°çš„ä½ç½®åé¦ˆ

3. ğŸ“ **å†å²è®°å½•**:
   - æ‰€æœ‰é€šä¿¡æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
   - æ”¯æŒåˆ†é¡µæŸ¥çœ‹å’Œå†å²è®°å½•æ¸…ç©º
   - é€šè¿‡SSEå®æ—¶æ›´æ–°æœ€æ–°é€šä¿¡çŠ¶æ€

### ğŸ¤ è¯­éŸ³åŠ©æ‰‹æµç¨‹ | Voice Assistant Flow
1. ğŸ‘‚ **è¯­éŸ³ç›‘å¬**: Snowboyå¼•æ“ç›‘å¬å”¤é†’è¯
2. ğŸ™ï¸ **è¯­éŸ³è¯†åˆ«**: å°†è¯­éŸ³è½¬æ¢ä¸ºæ–‡æœ¬
3. ğŸ§  **æ„å›¾ç†è§£**: åˆ†æç”¨æˆ·æ„å›¾å’ŒæŒ‡ä»¤
4. ğŸ’¬ **å“åº”ç”Ÿæˆ**: ç”Ÿæˆåˆé€‚çš„å›å¤å†…å®¹
5. ğŸ”Š **è¯­éŸ³åˆæˆ**: å°†å›å¤è½¬æ¢ä¸ºè¯­éŸ³è¾“å‡º

## ğŸ› ï¸ æ•…éšœæ’é™¤ | Troubleshooting

### ğŸ“¹ è§†é¢‘æµé—®é¢˜ | Video Stream Issues
- ğŸ” **æ‘„åƒå¤´æ— æ³•è®¿é—®**: æ£€æŸ¥æ‘„åƒå¤´è®¾å¤‡æƒé™å’Œé©±åŠ¨
- ğŸ“ **åˆ†è¾¨ç‡ä¸æ”¯æŒ**: è°ƒæ•´config.pyä¸­çš„åˆ†è¾¨ç‡è®¾ç½®
- âš¡ **å¸§ç‡è¿‡ä½**: é™ä½å¤„ç†åˆ†è¾¨ç‡æˆ–å…³é—­éƒ¨åˆ†AIåŠŸèƒ½
- ğŸ–¥ï¸ **æ˜¾ç¤ºé»‘å±**: ç¡®è®¤æ‘„åƒå¤´æœªè¢«å…¶ä»–ç¨‹åºå ç”¨

### ğŸ¤– AIæ£€æµ‹é—®é¢˜ | AI Detection Issues  
- ğŸ“¦ **MediaPipeå®‰è£…å¤±è´¥**: `pip install mediapipe>=0.8.9`
- ğŸ¯ **æ£€æµ‹ç²¾åº¦ä½**: è°ƒæ•´æ£€æµ‹å‚æ•°é˜ˆå€¼
- ğŸ’¡ **å…‰çº¿å½±å“**: ç¡®ä¿å……è¶³å‡åŒ€çš„é¢éƒ¨å…‰ç…§
- ğŸ”„ **æ£€æµ‹æŠ–åŠ¨**: å¢åŠ å¹³æ»‘çª—å£å¤§å°

### ğŸ”Œ ä¸²å£é€šä¿¡é—®é¢˜ | Serial Communication Issues
- ğŸ”— **è®¾å¤‡è¿æ¥å¤±è´¥**: æ£€æŸ¥è®¾å¤‡ç‰©ç†è¿æ¥å’Œé©±åŠ¨å®‰è£…
- ğŸ” **æƒé™ä¸è¶³**: `sudo chmod 666 /dev/ttyUSB*`
- âš¡ **æ³¢ç‰¹ç‡ä¸åŒ¹é…**: ç¡®è®¤è®¾å¤‡æ³¢ç‰¹ç‡è®¾ç½®æ­£ç¡®
- ğŸ“¡ **æ•°æ®æ ¼å¼é”™è¯¯**: æ£€æŸ¥å¸§æ ¼å¼å’Œå­—èŠ‚åº

### ğŸ—„ï¸ æ•°æ®åº“é—®é¢˜ | Database Issues
- ğŸš€ **è¿æ¥å¤±è´¥**: è¿è¡Œ `python test_db.py` æµ‹è¯•è¿æ¥
- ğŸ”‘ **æƒé™ä¸è¶³**: æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™è®¾ç½®
- ğŸ’¾ **å­˜å‚¨ç©ºé—´**: ç¡®è®¤æ•°æ®åº“æœ‰è¶³å¤Ÿå­˜å‚¨ç©ºé—´
- ğŸ”„ **è¡¨ç»“æ„**: é‡æ–°è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–

### ğŸ¤ è¯­éŸ³åŠ©æ‰‹é—®é¢˜ | Voice Assistant Issues
- ğŸ™ï¸ **éº¦å…‹é£æ— æ³•è®¿é—®**: æ£€æŸ¥éº¦å…‹é£æƒé™å’Œè®¾å¤‡
- ğŸ‘‚ **å”¤é†’è¯ä¸å“åº”**: è°ƒæ•´Snowboyæ•æ„Ÿåº¦å‚æ•°
- ğŸ”Š **éŸ³é¢‘è¾“å‡ºé—®é¢˜**: æ£€æŸ¥æ‰¬å£°å™¨è®¾å¤‡å’ŒéŸ³é‡
- ğŸŒ **ç½‘ç»œè¿æ¥**: ç¡®è®¤è¯­éŸ³æœåŠ¡ç½‘ç»œè¿æ¥æ­£å¸¸

### ğŸŒ Webç•Œé¢é—®é¢˜ | Web Interface Issues
- ğŸ”„ **é¡µé¢æ— æ³•åŠ è½½**: æ£€æŸ¥FlaskæœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨
- ğŸ“Š **å›¾è¡¨ä¸æ˜¾ç¤º**: ç¡®è®¤Chart.jså’ŒEChartsåº“åŠ è½½æ­£å¸¸
- ğŸ”§ **è°ƒè¯•æŒ‰é’®ä¸æ˜¾ç¤º**: ç¡®è®¤config.pyä¸­DEBUG_BUTTON_VISIBLE=True
- ğŸ“± **ç§»åŠ¨ç«¯é€‚é…**: ä½¿ç”¨ç°ä»£æµè§ˆå™¨å¹¶å¯ç”¨JavaScript

## ğŸ¯ å¸§æ ¼å¼è¯´æ˜ | Frame Format Documentation

### ğŸ“¡ ä¸Šä½æœºå‘é€å¸§æ ¼å¼ | Host Send Frame Format
```c
typedef struct {
    char start;     // 0: å¸§å¤´='s' | Frame header  
    char type;      // 1: æ¶ˆæ¯ç±»å‹=0xA0 (ä¸Š->ä¸‹) | Message type (Host->Device)
    char find_bool; // 2: æ˜¯å¦è¿½è¸ª | Tracking flag
    float yaw;      // 3-6: yawè§’åº¦æ•°æ® | Yaw angle data
    float pitch;    // 7-10: pitchè§’åº¦æ•°æ® | Pitch angle data  
    char end;       // 11: å¸§å°¾='e' | Frame footer
} usb_msg_t;
```

### ğŸ“¡ ä¸‹ä½æœºå‘é€å¸§æ ¼å¼ | Device Send Frame Format  
```c
typedef struct {
    char start;     // 0: å¸§å¤´='s' | Frame header
    char type;      // 1: æ¶ˆæ¯ç±»å‹=0xB0 (ä¸‹->ä¸Š) | Message type (Device->Host)
    float yaw;      // 2-5: yawè§’åº¦åé¦ˆ | Yaw angle feedback
    float pitch;    // 6-9: pitchè§’åº¦åé¦ˆ | Pitch angle feedback
    char end;       // 10: å¸§å°¾='e' | Frame footer  
} usb_msgRX_t;
```

### ğŸ“Š æ•°æ®æ ¼å¼ç¤ºä¾‹ | Data Format Examples
```python
# å‘é€ç¤ºä¾‹ | Send Example
send_data = {
    "find_bool": True,
    "yaw": 15.5,
    "pitch": -10.2
}

# æ¥æ”¶ç¤ºä¾‹ | Receive Example  
received_data = {
    "type": "frame_data",
    "yaw": 15.3,
    "pitch": -10.1,
    "timestamp": "2025-06-26 10:30:45"
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å— | Contributing

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š
We welcome contributions! Please follow these steps:

1. ğŸ´ Fork æœ¬é¡¹ç›® | Fork the repository
2. ğŸŒ¿ åˆ›å»ºç‰¹æ€§åˆ†æ”¯ | Create a feature branch: `git checkout -b feature/amazing-feature`  
3. âœ… æäº¤æ›´æ”¹ | Commit changes: `git commit -m 'âœ¨ Add amazing feature'`
4. ğŸ“¤ æ¨é€åˆ†æ”¯ | Push to branch: `git push origin feature/amazing-feature`
5. ğŸ”€ æäº¤PR | Open a Pull Request

### ğŸ“ æäº¤è§„èŒƒ | Commit Convention
- âœ¨ `feat`: æ–°åŠŸèƒ½ | New feature
- ğŸ› `fix`: ä¿®å¤bug | Bug fix  
- ğŸ“š `docs`: æ–‡æ¡£æ›´æ–° | Documentation
- ğŸ¨ `style`: ä»£ç æ ¼å¼ | Code style
- ğŸ”§ `refactor`: é‡æ„ | Refactoring
- âš¡ `perf`: æ€§èƒ½ä¼˜åŒ– | Performance
- âœ… `test`: æµ‹è¯•ç›¸å…³ | Testing
- ğŸš§ `chore`: æ„å»º/å·¥å…· | Build/Tools

## ğŸ“„ è®¸å¯è¯ | License

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details

## ğŸ™ è‡´è°¢ | Acknowledgments

- ğŸ¤– [MediaPipe](https://mediapipe.dev/) - å®æ—¶å§¿åŠ¿æ£€æµ‹
- ğŸ¯ [YOLO](https://ultralytics.com/) - ç›®æ ‡æ£€æµ‹æ¨¡å‹  
- ğŸ“Š [Chart.js](https://www.chartjs.org/) - æ•°æ®å¯è§†åŒ–
- ğŸŒ [Flask](https://flask.palletsprojects.com/) - Webæ¡†æ¶
- ğŸ¤ [Snowboy](https://snowboy.kitt.ai/) - è¯­éŸ³å”¤é†’
- ğŸ’¾ [MySQL](https://www.mysql.com/) - æ•°æ®åº“æ”¯æŒ

---

ğŸ“§ **è”ç³»æˆ‘ä»¬**: å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…

**Contact Us**: For questions or suggestions, please submit an Issue or contact the project maintainers